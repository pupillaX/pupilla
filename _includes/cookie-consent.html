<!-- GDPR Cookie Consent Banner -->
<div id="cookie-consent-banner" class="cookie-consent-banner" style="display: none;">
  <div class="cookie-consent-content">
    <div class="cookie-consent-text">
      <h4>üç™ Cookie Notice</h4>
      <p>We use cookies and similar technologies to improve your experience and analyze site usage. By clicking "Accept All", you consent to our use of cookies for analytics and functionality.</p>
      <div class="cookie-consent-links">
        <a href="{{ '/privacy-policy/' | relative_url }}" target="_blank">Privacy Policy</a>
      </div>
    </div>
    <div class="cookie-consent-buttons">
      <button id="cookie-reject" class="cookie-btn cookie-btn-reject">Reject</button>
      <button id="cookie-accept" class="cookie-btn cookie-btn-accept">Accept All</button>
    </div>
  </div>
</div>

<style>
.cookie-consent-banner {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  background: rgba(0, 0, 0, 0.95);
  color: white;
  padding: 20px;
  z-index: 9999;
  box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.3);
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
}

.cookie-consent-content {
  max-width: 1200px;
  margin: 0 auto;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 20px;
}

.cookie-consent-text h4 {
  margin: 0 0 8px 0;
  font-size: 18px;
  font-weight: 600;
}

.cookie-consent-text p {
  margin: 0 0 8px 0;
  font-size: 14px;
  line-height: 1.4;
}

.cookie-consent-links a {
  color: #4A90E2;
  text-decoration: underline;
  font-size: 13px;
}

.cookie-consent-buttons {
  display: flex;
  gap: 10px;
  flex-shrink: 0;
}

.cookie-btn {
  padding: 10px 20px;
  border: none;
  border-radius: 6px;
  font-size: 14px;
  font-weight: 600;
  cursor: pointer;
  transition: background-color 0.2s;
}

.cookie-btn-reject {
  background: #666;
  color: white;
}

.cookie-btn-reject:hover {
  background: #555;
}

.cookie-btn-accept {
  background: #4A90E2;
  color: white;
}

.cookie-btn-accept:hover {
  background: #357ABD;
}

@media (max-width: 768px) {
  .cookie-consent-content {
    flex-direction: column;
    text-align: center;
  }
  
  .cookie-consent-buttons {
    justify-content: center;
    width: 100%;
  }
  
  .cookie-btn {
    flex: 1;
    max-width: 120px;
  }
}
</style>

<script>
(function() {
  'use strict';
  
  // Check if user has already made a choice
  const consentStatus = localStorage.getItem('cookie-consent');
  const banner = document.getElementById('cookie-consent-banner');
  
  // Show banner if no consent given
  if (!consentStatus) {
    banner.style.display = 'block';
  } else if (consentStatus === 'accepted') {
    // User previously accepted, load analytics
    loadGoogleAnalytics();
  }
  
  // Accept button
  document.getElementById('cookie-accept').addEventListener('click', function() {
    localStorage.setItem('cookie-consent', 'accepted');
    banner.style.display = 'none';
    loadGoogleAnalytics();
  });
  
  // Reject button
  document.getElementById('cookie-reject').addEventListener('click', function() {
    localStorage.setItem('cookie-consent', 'rejected');
    banner.style.display = 'none';
    // Disable analytics if already loaded
    if (typeof gtag !== 'undefined') {
      gtag('consent', 'update', {
        'analytics_storage': 'denied'
      });
    }
  });
  
  function loadGoogleAnalytics() {
    // Only load if not already loaded
    if (typeof gtag === 'undefined') {
      // Load gtag script
      const script = document.createElement('script');
      script.async = true;
      script.src = 'https://www.googletagmanager.com/gtag/js?id={{ site.google_analytics }}';
      document.head.appendChild(script);
      
      script.onload = function() {
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        window.gtag = gtag;
        gtag('js', new Date());
        gtag('config', '{{ site.google_analytics }}', {
          'send_page_view': true,
          'anonymize_ip': true
        });
        console.log('Google Analytics loaded with consent');
      };
    }
  }
})();
</script>
